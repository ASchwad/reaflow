import { Meta } from '@storybook/addon-docs/blocks';

<Meta title="Docs/Helpers" />

# Helpers

## Upsert Node
The `upsertNode` function helps you insert a new
node between two other nodes.

```js
import { upsertNode} from 'reaflow';

const id = `node-${Math.random()}`;
const newNode = {
  id,
  text: id
};

const results = upsertNode(nodes, edges, edge, newNode);
setNodes(results.nodes);
setEdges(results.edges);
```

## Remove Node
The `removeNode` function helps you remove a node
and all related edges.

```js
import { removeNode } from 'reaflow';

const results = removeNode(nodes, edges, node);
setNodes(results.nodes);
setEdges(results.edges);
```

## Has Link
The `hasLink` function helps you determine if
the source node already has a link to the target node.

```js
import { hasLink } from 'reaflow';

const has = hasLink(edges, fromNode, toNode);
if (!has) {
  // Do something
}
```

## Detecting Circulars
The `detectCircular` function helps you determine if
the source node will create a circular link if connected
to the target node.

```js
import { detectCircular } from 'reaflow';

const has = detectCircular(nodes, edges, fromNode, toNode);
if (!has) {
  // Do something
}
```

## Parent Node Traversal
The `getParentsForNodeId` function helps you find all the
parent nodes for a given node id.

```js
import { getParentsForNodeId } from 'reaflow';

const nodes = getParentsForNodeId(nodes, edges, node.id);
```

## Node Removal and Upsert
The `removeAndUpsertNodes` helper allows you to remove a node
that has existing `to` and `from` edges and link the child
edges from the node remove to the parent of the node removed.

```js
import { removeAndUpsertNodes } from 'reaflow';

const result = removeAndUpsertNodes(nodes, edges, node);
setNodes(results.nodes);
setEdges(results.edges);
```

## Add Node and Optional Edge
The `addNodeAndEdge` helper is a shortcut function to add a
node to a nodes array and a optional edge.

```js
import { addNodeAndEdge } from 'reaflow';

const result = addNodeAndEdge(
  nodes,
  edges,
  {
    id,
    text: id
  },
  enteredNode
);

setNodes(results.nodes);
setEdges(results.edges);
```
